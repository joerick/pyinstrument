var pyinstrumentHTMLRenderer=function(){"use strict";var ls=Object.defineProperty;var as=(M,ge,Pe)=>ge in M?ls(M,ge,{enumerable:!0,configurable:!0,writable:!0,value:Pe}):M[ge]=Pe;var T=(M,ge,Pe)=>as(M,typeof ge!="symbol"?ge+"":ge,Pe);function M(){}function ge(t){return t()}function Pe(){return Object.create(null)}function oe(t){t.forEach(ge)}function vt(t){return typeof t=="function"}function le(t,e){return t!=t?e==e:t!==e||t&&typeof t=="object"||typeof t=="function"}function ki(t){return Object.keys(t).length===0}function Ht(t,...e){if(t==null){for(const n of e)n(void 0);return M}const i=t.subscribe(...e);return i.unsubscribe?()=>i.unsubscribe():i}function _e(t,e,i){t.$$.on_destroy.push(Ht(e,i))}function Ei(t,e,i){return t.set(i),e}function c(t,e){t.appendChild(e)}function S(t,e,i){t.insertBefore(e,i||null)}function R(t){t.parentNode&&t.parentNode.removeChild(t)}function f(t){return document.createElement(t)}function O(t){return document.createElementNS("http://www.w3.org/2000/svg",t)}function I(t){return document.createTextNode(t)}function w(){return I(" ")}function Mi(){return I("")}function N(t,e,i,n){return t.addEventListener(e,i,n),()=>t.removeEventListener(e,i,n)}function gt(t){return function(e){return e.preventDefault(),t.call(this,e)}}function _t(t){return function(e){return e.stopPropagation(),t.call(this,e)}}function a(t,e,i){i==null?t.removeAttribute(e):t.getAttribute(e)!==i&&t.setAttribute(e,i)}function bt(t){let e;return{p(...i){e=i,e.forEach(n=>t.push(n))},r(){e.forEach(i=>t.splice(t.indexOf(i),1))}}}function Fi(t){return Array.from(t.childNodes)}function Ae(t,e){e=""+e,t.data!==e&&(t.data=e)}function ce(t,e){t.value=e??""}function Y(t,e,i,n){i==null?t.style.removeProperty(e):t.style.setProperty(e,i,"")}function ke(t,e,i){t.classList.toggle(e,!!i)}function Pi(t,e,{bubbles:i=!1,cancelable:n=!1}={}){return new CustomEvent(t,{detail:e,bubbles:i,cancelable:n})}class Ii{constructor(e=!1){T(this,"is_svg",!1);T(this,"e");T(this,"n");T(this,"t");T(this,"a");this.is_svg=e,this.e=this.n=null}c(e){this.h(e)}m(e,i,n=null){this.e||(this.is_svg?this.e=O(i.nodeName):this.e=f(i.nodeType===11?"TEMPLATE":i.nodeName),this.t=i.tagName!=="TEMPLATE"?i:i.content,this.c(e)),this.i(n)}h(e){this.e.innerHTML=e,this.n=Array.from(this.e.nodeName==="TEMPLATE"?this.e.content.childNodes:this.e.childNodes)}i(e){for(let i=0;i<this.n.length;i+=1)S(this.t,this.n[i],e)}p(e){this.d(),this.h(e),this.i(this.a)}d(){this.n.forEach(R)}}let Xe;function Qe(t){Xe=t}function Lt(){if(!Xe)throw new Error("Function called outside component initialization");return Xe}function Vt(t){Lt().$$.on_mount.push(t)}function Ri(){const t=Lt();return(e,i,{cancelable:n=!1}={})=>{const s=t.$$.callbacks[e];if(s){const l=Pi(e,i,{cancelable:n});return s.slice().forEach(r=>{r.call(t,l)}),!l.defaultPrevented}return!0}}const Se=[],He=[];let Le=[];const Dt=[],Si=Promise.resolve();let wt=!1;function Hi(){wt||(wt=!0,Si.then($t))}function yt(t){Le.push(t)}const At=new Set;let Ve=0;function $t(){if(Ve!==0)return;const t=Xe;do{try{for(;Ve<Se.length;){const e=Se[Ve];Ve++,Qe(e),Li(e.$$)}}catch(e){throw Se.length=0,Ve=0,e}for(Qe(null),Se.length=0,Ve=0;He.length;)He.pop()();for(let e=0;e<Le.length;e+=1){const i=Le[e];At.has(i)||(At.add(i),i())}Le.length=0}while(Se.length);for(;Dt.length;)Dt.pop()();wt=!1,At.clear(),Qe(t)}function Li(t){if(t.fragment!==null){t.update(),oe(t.before_update);const e=t.dirty;t.dirty=[-1],t.fragment&&t.fragment.p(t.ctx,e),t.after_update.forEach(yt)}}function Vi(t){const e=[],i=[];Le.forEach(n=>t.indexOf(n)===-1?e.push(n):i.push(n)),i.forEach(n=>n()),Le=e}const st=new Set;let Ie;function De(){Ie={r:0,c:[],p:Ie}}function $e(){Ie.r||oe(Ie.c),Ie=Ie.p}function L(t,e){t&&t.i&&(st.delete(t),t.i(e))}function B(t,e,i,n){if(t&&t.o){if(st.has(t))return;st.add(t),Ie.c.push(()=>{st.delete(t),n&&(i&&t.d(1),n())}),t.o(e)}else n&&n()}function Ot(t){return(t==null?void 0:t.length)!==void 0?t:Array.from(t)}function Di(t,e){B(t,1,1,()=>{e.delete(t.key)})}function $i(t,e,i,n,s,l,r,o,u,d,p,m){let h=t.length,v=l.length,_=h;const b={};for(;_--;)b[t[_].key]=_;const E=[],y=new Map,A=new Map,P=[];for(_=v;_--;){const C=m(s,l,_),H=i(C);let g=r.get(H);g?P.push(()=>g.p(C,e)):(g=d(H,C),g.c()),y.set(H,E[_]=g),H in b&&A.set(H,Math.abs(_-b[H]))}const V=new Set,U=new Set;function F(C){L(C,1),C.m(o,p),r.set(C.key,C),p=C.first,v--}for(;h&&v;){const C=E[v-1],H=t[h-1],g=C.key,k=H.key;C===H?(p=C.first,h--,v--):y.has(k)?!r.has(g)||V.has(g)?F(C):U.has(k)?h--:A.get(g)>A.get(k)?(U.add(g),F(C)):(V.add(k),h--):(u(H,r),h--)}for(;h--;){const C=t[h];y.has(C.key)||u(C,r)}for(;v;)F(E[v-1]);return oe(P),E}function be(t){t&&t.c()}function ue(t,e,i){const{fragment:n,after_update:s}=t.$$;n&&n.m(e,i),yt(()=>{const l=t.$$.on_mount.map(ge).filter(vt);t.$$.on_destroy?t.$$.on_destroy.push(...l):oe(l),t.$$.on_mount=[]}),s.forEach(yt)}function de(t,e){const i=t.$$;i.fragment!==null&&(Vi(i.after_update),oe(i.on_destroy),i.fragment&&i.fragment.d(e),i.on_destroy=i.fragment=null,i.ctx=[])}function Oi(t,e){t.$$.dirty[0]===-1&&(Se.push(t),Hi(),t.$$.dirty.fill(0)),t.$$.dirty[e/31|0]|=1<<e%31}function fe(t,e,i,n,s,l,r=null,o=[-1]){const u=Xe;Qe(t);const d=t.$$={fragment:null,ctx:[],props:l,update:M,not_equal:s,bound:Pe(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(e.context||(u?u.$$.context:[])),callbacks:Pe(),dirty:o,skip_bound:!1,root:e.target||u.$$.root};r&&r(d.root);let p=!1;if(d.ctx=i?i(t,e.props||{},(m,h,...v)=>{const _=v.length?v[0]:h;return d.ctx&&s(d.ctx[m],d.ctx[m]=_)&&(!d.skip_bound&&d.bound[m]&&d.bound[m](_),p&&Oi(t,m)),h}):[],d.update(),p=!0,oe(d.before_update),d.fragment=n?n(d.ctx):!1,e.target){if(e.hydrate){const m=Fi(e.target);d.fragment&&d.fragment.l(m),m.forEach(R)}else d.fragment&&d.fragment.c();e.intro&&L(t.$$.fragment),ue(t,e.target,e.anchor),$t()}Qe(u)}class he{constructor(){T(this,"$$");T(this,"$$set")}$destroy(){de(this,1),this.$destroy=M}$on(e,i){if(!vt(i))return M;const n=this.$$.callbacks[e]||(this.$$.callbacks[e]=[]);return n.push(i),()=>{const s=n.indexOf(i);s!==-1&&n.splice(s,1)}}$set(e){this.$$set&&!ki(e)&&(this.$$.skip_bound=!0,this.$$set(e),this.$$.skip_bound=!1)}}const Ni="4";typeof window<"u"&&(window.__svelte||(window.__svelte={v:new Set})).v.add(Ni);function Bi(t){let e,i;return{c(){e=O("svg"),i=O("path"),a(i,"fill-rule","evenodd"),a(i,"clip-rule","evenodd"),a(i,"d","M5.11634 0.889422C4.86506 -0.296474 3.17237 -0.296474 2.92109 0.889422C2.78291 1.54158 2.10994 1.93011 1.47607 1.72371C0.323418 1.34837 -0.522932 2.81429 0.378448 3.62484C0.87414 4.07059 0.87414 4.84767 0.378448 5.29341C-0.522931 6.10397 0.323418 7.56989 1.47607 7.19455C2.10994 6.98814 2.78291 7.37668 2.92109 8.02883C3.17237 9.21473 4.86506 9.21473 5.11634 8.02883C5.25452 7.37668 5.92749 6.98814 6.56136 7.19455C7.71401 7.56989 8.56036 6.10397 7.65898 5.29341C7.16329 4.84767 7.16329 4.07059 7.65898 3.62484C8.56036 2.81429 7.71401 1.34837 6.56136 1.72371C5.92749 1.93011 5.25452 1.54158 5.11634 0.889422ZM4.01883 6.33408C5.05436 6.33408 5.89383 5.49462 5.89383 4.45908C5.89383 3.42355 5.05436 2.58408 4.01883 2.58408C2.98329 2.58408 2.14383 3.42355 2.14383 4.45908C2.14383 5.49462 2.98329 6.33408 4.01883 6.33408Z"),a(i,"fill","currentColor"),a(e,"width","9"),a(e,"height","9"),a(e,"viewBox","0 0 9 9"),a(e,"fill","none"),a(e,"xmlns","http://www.w3.org/2000/svg")},m(n,s){S(n,e,s),c(e,i)},p:M,i:M,o:M,d(n){n&&R(e)}}}class Wi extends he{constructor(e){super(),fe(this,e,null,Bi,le,{})}}function zi(t){let e,i,n,s,l,r,o,u,d,p,m,h,v,_,b,E,y;return{c(){e=O("svg"),i=O("g"),n=O("path"),s=O("path"),l=O("defs"),r=O("filter"),o=O("feFlood"),u=O("feBlend"),d=O("feGaussianBlur"),p=O("linearGradient"),m=O("stop"),h=O("stop"),v=O("stop"),_=O("linearGradient"),b=O("stop"),E=O("stop"),y=O("stop"),a(n,"fill-rule","evenodd"),a(n,"clip-rule","evenodd"),a(n,"d","M30 9H10V11.5H30V9ZM30 19H12.5V21.5H30V19ZM12.5 14H32.5V16.5H12.5V14ZM20 24H12.5V26.5H20V24ZM12.5 29H20V31.5H12.5V29ZM22.5 34H10V36.5H22.5V34Z"),a(n,"fill","url(#paint0_linear_67_262)"),a(i,"opacity","0.5"),a(i,"filter","url(#filter0_f_67_262)"),a(s,"fill-rule","evenodd"),a(s,"clip-rule","evenodd"),a(s,"d","M30 9H10V11.5H30V9ZM30 19H12.5V21.5H30V19ZM12.5 14H32.5V16.5H12.5V14ZM20 24H12.5V26.5H20V24ZM12.5 29H20V31.5H12.5V29ZM22.5 34H10V36.5H22.5V34Z"),a(s,"fill","url(#paint1_linear_67_262)"),a(o,"flood-opacity","0"),a(o,"result","BackgroundImageFix"),a(u,"mode","normal"),a(u,"in","SourceGraphic"),a(u,"in2","BackgroundImageFix"),a(u,"result","shape"),a(d,"stdDeviation","3.39785"),a(d,"result","effect1_foregroundBlur_67_262"),a(r,"id","filter0_f_67_262"),a(r,"x","3.2043"),a(r,"y","2.2043"),a(r,"width","36.0914"),a(r,"height","41.0914"),a(r,"filterUnits","userSpaceOnUse"),a(r,"color-interpolation-filters","sRGB"),a(m,"stop-color","#FFAA00"),a(h,"offset","0.514478"),a(h,"stop-color","#FFEB00"),a(v,"offset","1"),a(v,"stop-color","#98FF05"),a(p,"id","paint0_linear_67_262"),a(p,"x1","7.3769"),a(p,"y1","18.4566"),a(p,"x2","20.6583"),a(p,"y2","33.1038"),a(p,"gradientUnits","userSpaceOnUse"),a(b,"stop-color","#FFC834"),a(E,"offset","0.514478"),a(E,"stop-color","#FAF534"),a(y,"offset","1"),a(y,"stop-color","#B8FF38"),a(_,"id","paint1_linear_67_262"),a(_,"x1","7.3769"),a(_,"y1","18.4566"),a(_,"x2","20.6583"),a(_,"y2","33.1038"),a(_,"gradientUnits","userSpaceOnUse"),a(e,"width","44"),a(e,"height","44"),a(e,"viewBox","0 0 44 44"),a(e,"fill","none"),a(e,"xmlns","http://www.w3.org/2000/svg")},m(A,P){S(A,e,P),c(e,i),c(i,n),c(e,s),c(e,l),c(l,r),c(r,o),c(r,u),c(r,d),c(l,p),c(p,m),c(p,h),c(p,v),c(l,_),c(_,b),c(_,E),c(_,y)},p:M,i:M,o:M,d(A){A&&R(e)}}}class Ui extends he{constructor(e){super(),fe(this,e,null,zi,le,{})}}const Oe=[];function Gi(t,e){return{subscribe:rt(t,e).subscribe}}function rt(t,e=M){let i;const n=new Set;function s(o){if(le(t,o)&&(t=o,i)){const u=!Oe.length;for(const d of n)d[1](),Oe.push(d,t);if(u){for(let d=0;d<Oe.length;d+=2)Oe[d][0](Oe[d+1]);Oe.length=0}}}function l(o){s(o(t))}function r(o,u=M){const d=[o,u];return n.add(d),n.size===1&&(i=e(s,l)||M),o(t),()=>{n.delete(d),n.size===0&&i&&(i(),i=null)}}return{set:s,update:l,subscribe:r}}function Nt(t,e,i){const n=!Array.isArray(t),s=n?[t]:t;if(!s.every(Boolean))throw new Error("derived() expects stores as input, got a falsy value");const l=e.length<2;return Gi(i,(r,o)=>{let u=!1;const d=[];let p=0,m=M;const h=()=>{if(p)return;m();const _=e(n?d[0]:d,r,o);l?r(_):m=vt(_)?_:M},v=s.map((_,b)=>Ht(_,E=>{d[b]=E,p&=~(1<<b),u&&h()},()=>{p|=1<<b}));return u=!0,h(),function(){oe(v),m(),u=!1}})}var Tt={local:{},session:{}};function Ki(t){return t==="local"?localStorage:sessionStorage}function Ct(t,e,i){var n,s,l,r,o,u,d,p;i!=null&&i.onError&&console.warn("onError has been deprecated. Please use onWriteError instead");const m=(n=i==null?void 0:i.serializer)!=null?n:JSON,h=(s=i==null?void 0:i.storage)!=null?s:"local",v=(l=i==null?void 0:i.syncTabs)!=null?l:!0,_=(o=(r=i==null?void 0:i.onWriteError)!=null?r:i==null?void 0:i.onError)!=null?o:F=>console.error(`Error when writing value from persisted store "${t}" to ${h}`,F),b=(u=i==null?void 0:i.onParseError)!=null?u:(F,C)=>console.error(`Error when parsing ${F?'"'+F+'"':"value"} from persisted store "${t}"`,C),E=(d=i==null?void 0:i.beforeRead)!=null?d:F=>F,y=(p=i==null?void 0:i.beforeWrite)!=null?p:F=>F,A=typeof window<"u"&&typeof document<"u",P=A?Ki(h):null;function V(F,C){const H=y(C);try{P==null||P.setItem(F,m.stringify(H))}catch(g){_(g)}}function U(){function F(k){try{return m.parse(k)}catch($){b(k,$)}}const C=P==null?void 0:P.getItem(t);if(C==null)return e;const H=F(C);return H==null?e:E(H)}if(!Tt[h][t]){const F=U(),C=rt(F,k=>{if(A&&h=="local"&&v){const $=Q=>{if(Q.key===t&&Q.newValue){let W;try{W=m.parse(Q.newValue)}catch(te){b(Q.newValue,te);return}const Re=E(W);k(Re)}};return window.addEventListener("storage",$),()=>window.removeEventListener("storage",$)}}),{subscribe:H,set:g}=C;Tt[h][t]={set(k){g(k),V(t,k)},update(k){return C.update($=>{const Q=k($);return V(t,Q),Q})},reset(){this.set(e)},subscribe:H}}return Tt[h][t]}function Bt(){return{collapseMode:"non-application",collapseCustomHide:"",collapseCustomShow:"",removeImportlib:!0,removeTracebackHide:!0,removePyinstrument:!0,removeIrrelevant:!0,removeIrrelevantThreshold:.001,timeFormat:"absolute"}}const x=Ct("pyinstrument:viewOptionsCallStack",Bt(),{syncTabs:!0,beforeRead(t){return{...Bt(),...t}}}),Ze=Ct("pyinstrument:viewOptions",{viewMode:"call-stack"},{syncTabs:!1}),je=Ct("pyinstrument:viewOptionsTimeline",{removeImportlib:!0,removeTracebackHide:!0,removePyinstrument:!0,removeIrrelevant:!0,removeIrrelevantThreshold:1e-4},{syncTabs:!0});function Xi(t){let e,i,n,s,l,r,o,u,d,p,m,h,v,_,b,E,y,A,P,V,U,F,C,H,g,k,$,Q,W,Re,te,ee,Z,Ee,G,Je,et,ae,K,tt,ie,me,pe,we,ve,Te,it,Ce,J,We,Me,nt,z,D,j,fi,ct,hi,mi,ze,Fe,pi,Ue,ut,vi,gi,ye,_i,bi,Ge,dt,wi,Ke,ft,ht,ne,yi,Ai,mt,pt,se,Ti,It,Rt,St,Ci;return It=bt(t[5][0]),Rt=bt(t[5][1]),{c(){e=f("div"),i=f("div"),n=f("div"),n.textContent="Collapse frames",s=w(),l=f("div"),r=f("div"),o=f("input"),u=w(),d=f("label"),p=I("Non-application code"),m=w(),h=f("div"),h.textContent=`Application code is anything run from outside the Python home
          directory.`,v=w(),_=f("div"),b=f("input"),E=w(),y=f("label"),A=I("Custom"),P=w(),V=f("div"),U=I(`Regex on the source file path.
          `),F=f("div"),C=f("label"),C.textContent="Show",H=w(),g=f("input"),k=w(),$=f("label"),$.textContent="Hide",Q=w(),W=f("input"),Re=I(`
          If neither match, non-application rule is used.`),te=w(),ee=f("div"),Z=f("input"),Ee=w(),G=f("label"),Je=I("Disabled"),et=w(),ae=f("div"),K=f("div"),K.textContent="Remove frames",tt=w(),ie=f("div"),me=f("div"),pe=f("input"),we=w(),ve=f("label"),Te=I("importlib machinery"),it=w(),Ce=f("div"),J=f("input"),We=w(),Me=f("label"),nt=I("Frames declaring __traceback_hide__"),z=w(),D=f("div"),j=f("input"),fi=w(),ct=f("label"),hi=I("pyinstrument frames"),mi=w(),ze=f("div"),Fe=f("input"),pi=w(),Ue=f("span"),ut=f("label"),vi=I("Frames with durations less than"),gi=w(),ye=f("input"),_i=I(`
          % of the total time`),bi=w(),Ge=f("div"),dt=f("div"),dt.textContent="Time format",wi=w(),Ke=f("div"),ft=f("div"),ht=f("label"),ne=f("input"),yi=I(`
          Absolute time in seconds`),Ai=w(),mt=f("div"),pt=f("label"),se=f("input"),Ti=I(`
          Percentage of the total run time`),a(n,"class","name svelte-1pecl4m"),a(o,"id",t[1]+"collapseModeAll"),a(o,"type","radio"),o.__value="non-application",ce(o,o.__value),a(o,"class","svelte-1pecl4m"),a(d,"for",t[1]+"collapseModeAll"),a(h,"class","description svelte-1pecl4m"),a(r,"class","option svelte-1pecl4m"),a(b,"id",t[1]+"collapseModeCustom"),a(b,"type","radio"),b.__value="custom",ce(b,b.__value),a(b,"class","svelte-1pecl4m"),a(y,"for",t[1]+"collapseModeCustom"),a(C,"for","collapseCustomShow"),a(C,"class","svelte-1pecl4m"),a(g,"id","collapseCustomShow"),a(g,"type","text"),a(g,"placeholder","myproject"),a(g,"spellcheck","false"),a(g,"autocapitalize","off"),a(g,"autocomplete","off"),a(g,"autocorrect","off"),a(g,"class","svelte-1pecl4m"),a($,"for","collapseCustomHide"),a($,"class","svelte-1pecl4m"),a(W,"id","collapseCustomHide"),a(W,"type","text"),a(W,"placeholder",".*/lib/.*"),a(W,"spellcheck","false"),a(W,"autocapitalize","off"),a(W,"autocomplete","off"),a(W,"autocorrect","off"),a(W,"class","svelte-1pecl4m"),a(F,"class","mini-input-grid svelte-1pecl4m"),a(V,"class","description svelte-1pecl4m"),a(_,"class","option svelte-1pecl4m"),a(Z,"id",t[1]+"collapseModeDisabled"),a(Z,"type","radio"),Z.__value="disabled",ce(Z,Z.__value),a(Z,"class","svelte-1pecl4m"),a(G,"for",t[1]+"collapseModeDisabled"),a(ee,"class","option svelte-1pecl4m"),a(l,"class","body"),a(i,"class","option-group svelte-1pecl4m"),a(K,"class","name svelte-1pecl4m"),a(pe,"id",t[1]+"removeImportlib"),a(pe,"type","checkbox"),a(pe,"class","svelte-1pecl4m"),a(ve,"for",t[1]+"removeImportlib"),a(me,"class","option svelte-1pecl4m"),a(J,"id",t[1]+"removeTracebackHide"),a(J,"type","checkbox"),a(J,"class","svelte-1pecl4m"),a(Me,"for",t[1]+"removeTracebackHide"),a(Ce,"class","option svelte-1pecl4m"),a(j,"id",t[1]+"removePyinstrument"),a(j,"type","checkbox"),a(j,"class","svelte-1pecl4m"),a(ct,"for",t[1]+"removePyinstrument"),a(D,"class","option svelte-1pecl4m"),a(Fe,"id",t[1]+"removeIrrelevant"),a(Fe,"type","checkbox"),a(Fe,"class","svelte-1pecl4m"),a(ut,"for",t[1]+"removeIrrelevant"),a(ye,"type","number"),ye.value=t[2](),a(ye,"min","0"),a(ye,"max","99"),a(ye,"step","0.01"),Y(ye,"width","4em"),a(ye,"class","svelte-1pecl4m"),a(ze,"class","option svelte-1pecl4m"),a(ie,"class","body"),a(ae,"class","option-group svelte-1pecl4m"),a(dt,"class","name svelte-1pecl4m"),a(ne,"type","radio"),ne.__value="absolute",ce(ne,ne.__value),a(ne,"class","svelte-1pecl4m"),a(ft,"class","option svelte-1pecl4m"),a(se,"type","radio"),se.__value="proportion",ce(se,se.__value),a(se,"class","svelte-1pecl4m"),a(mt,"class","option svelte-1pecl4m"),a(Ke,"class","body"),a(Ge,"class","option-group svelte-1pecl4m"),a(e,"class","view-options-call-stack svelte-1pecl4m"),It.p(ne,se),Rt.p(o,b,Z)},m(q,re){S(q,e,re),c(e,i),c(i,n),c(i,s),c(i,l),c(l,r),c(r,o),o.checked=o.__value===t[0].collapseMode,c(r,u),c(r,d),c(d,p),c(r,m),c(r,h),c(l,v),c(l,_),c(_,b),b.checked=b.__value===t[0].collapseMode,c(_,E),c(_,y),c(y,A),c(_,P),c(_,V),c(V,U),c(V,F),c(F,C),c(F,H),c(F,g),ce(g,t[0].collapseCustomShow),c(F,k),c(F,$),c(F,Q),c(F,W),ce(W,t[0].collapseCustomHide),c(V,Re),c(l,te),c(l,ee),c(ee,Z),Z.checked=Z.__value===t[0].collapseMode,c(ee,Ee),c(ee,G),c(G,Je),c(e,et),c(e,ae),c(ae,K),c(ae,tt),c(ae,ie),c(ie,me),c(me,pe),pe.checked=t[0].removeImportlib,c(me,we),c(me,ve),c(ve,Te),c(ie,it),c(ie,Ce),c(Ce,J),J.checked=t[0].removeTracebackHide,c(Ce,We),c(Ce,Me),c(Me,nt),c(ie,z),c(ie,D),c(D,j),j.checked=t[0].removePyinstrument,c(D,fi),c(D,ct),c(ct,hi),c(ie,mi),c(ie,ze),c(ze,Fe),Fe.checked=t[0].removeIrrelevant,c(ze,pi),c(ze,Ue),c(Ue,ut),c(ut,vi),c(Ue,gi),c(Ue,ye),c(Ue,_i),c(e,bi),c(e,Ge),c(Ge,dt),c(Ge,wi),c(Ge,Ke),c(Ke,ft),c(ft,ht),c(ht,ne),ne.checked=ne.__value===t[0].timeFormat,c(ht,yi),c(Ke,Ai),c(Ke,mt),c(mt,pt),c(pt,se),se.checked=se.__value===t[0].timeFormat,c(pt,Ti),St||(Ci=[N(o,"change",t[4]),N(b,"change",t[6]),N(g,"input",t[7]),N(W,"input",t[8]),N(Z,"change",t[9]),N(pe,"change",t[10]),N(J,"change",t[11]),N(j,"change",t[12]),N(Fe,"change",t[13]),N(ye,"input",t[3]),N(ne,"change",t[14]),N(se,"change",t[15])],St=!0)},p(q,[re]){re&1&&(o.checked=o.__value===q[0].collapseMode),re&1&&(b.checked=b.__value===q[0].collapseMode),re&1&&g.value!==q[0].collapseCustomShow&&ce(g,q[0].collapseCustomShow),re&1&&W.value!==q[0].collapseCustomHide&&ce(W,q[0].collapseCustomHide),re&1&&(Z.checked=Z.__value===q[0].collapseMode),re&1&&(pe.checked=q[0].removeImportlib),re&1&&(J.checked=q[0].removeTracebackHide),re&1&&(j.checked=q[0].removePyinstrument),re&1&&(Fe.checked=q[0].removeIrrelevant),re&1&&(ne.checked=ne.__value===q[0].timeFormat),re&1&&(se.checked=se.__value===q[0].timeFormat)},i:M,o:M,d(q){q&&R(e),It.r(),Rt.r(),St=!1,oe(Ci)}}}function Qi(t,e,i){let n;_e(t,x,P=>i(0,n=P));const s=Math.random().toString(36).substring(4);function l(){return(n.removeIrrelevantThreshold*100).toLocaleString(void 0,{maximumFractionDigits:4})}function r(P){Ei(x,n.removeIrrelevantThreshold=P.currentTarget.valueAsNumber/100,n)}const o=[[],[]];function u(){n.collapseMode=this.__value,x.set(n)}function d(){n.collapseMode=this.__value,x.set(n)}function p(){n.collapseCustomShow=this.value,x.set(n)}function m(){n.collapseCustomHide=this.value,x.set(n)}function h(){n.collapseMode=this.__value,x.set(n)}function v(){n.removeImportlib=this.checked,x.set(n)}function _(){n.removeTracebackHide=this.checked,x.set(n)}function b(){n.removePyinstrument=this.checked,x.set(n)}function E(){n.removeIrrelevant=this.checked,x.set(n)}function y(){n.timeFormat=this.__value,x.set(n)}function A(){n.timeFormat=this.__value,x.set(n)}return[n,s,l,r,u,o,d,p,m,h,v,_,b,E,y,A]}class Zi extends he{constructor(e){super(),fe(this,e,Qi,Xi,le,{})}}function ji(t){let e,i,n,s,l,r,o,u,d,p,m,h,v,_,b,E,y,A,P,V,U,F,C,H;return{c(){e=f("div"),i=f("div"),n=f("div"),n.textContent="Remove frames",s=w(),l=f("div"),r=f("div"),o=f("input"),u=w(),d=f("label"),p=I("importlib machinery"),m=w(),h=f("div"),v=f("input"),_=w(),b=f("label"),E=I("Frames declaring __traceback_hide__"),y=w(),A=f("div"),P=f("input"),V=w(),U=f("label"),F=I("pyinstrument frames"),a(n,"class","name"),a(o,"id",t[1]+"removeImportlib"),a(o,"type","checkbox"),a(d,"for",t[1]+"removeImportlib"),a(r,"class","option"),a(v,"id",t[1]+"removeTracebackHide"),a(v,"type","checkbox"),a(b,"for",t[1]+"removeTracebackHide"),a(h,"class","option"),a(P,"id",t[1]+"removePyinstrument"),a(P,"type","checkbox"),a(U,"for",t[1]+"removePyinstrument"),a(A,"class","option"),a(l,"class","body"),a(i,"class","option-group"),a(e,"class","view-options-timeline svelte-vsz8zm")},m(g,k){S(g,e,k),c(e,i),c(i,n),c(i,s),c(i,l),c(l,r),c(r,o),o.checked=t[0].removeImportlib,c(r,u),c(r,d),c(d,p),c(l,m),c(l,h),c(h,v),v.checked=t[0].removeTracebackHide,c(h,_),c(h,b),c(b,E),c(l,y),c(l,A),c(A,P),P.checked=t[0].removePyinstrument,c(A,V),c(A,U),c(U,F),C||(H=[N(o,"change",t[2]),N(v,"change",t[3]),N(P,"change",t[4])],C=!0)},p(g,[k]){k&1&&(o.checked=g[0].removeImportlib),k&1&&(v.checked=g[0].removeTracebackHide),k&1&&(P.checked=g[0].removePyinstrument)},i:M,o:M,d(g){g&&R(e),C=!1,oe(H)}}}function qi(t,e,i){let n;_e(t,je,u=>i(0,n=u));const s=Math.random().toString(36).substring(4);function l(){n.removeImportlib=this.checked,je.set(n)}function r(){n.removeTracebackHide=this.checked,je.set(n)}function o(){n.removePyinstrument=this.checked,je.set(n)}return[n,s,l,r,o]}class Yi extends he{constructor(e){super(),fe(this,e,qi,ji,le,{})}}class xi extends Error{constructor(e){super(`Unreachable case: ${e}`)}}function Ji(t,e){const i=e*(t.length-1),n=Math.floor(i),s=Math.ceil(i),l=t[n],r=t[s],o=i-n;return tn(o,{to:[l,r]})}function en(t,e,i){return t===1/0?(console.warn("clamp: value is Infinity, returning `max`",t),i):t===-1/0?(console.warn("clamp: value is -Infinity, returning `min`",t),e):Number.isFinite(t)?t<e?e:t>i?i:t:(console.warn("clamp: value isn't finite, returning `min`",t),e)}function Ne(t,e){const{from:i=[0,1],to:n=[0,1]}=e,s=e.clamp||!1;let l=(t-i[0])/(i[1]-i[0])*(n[1]-n[0])+n[0];return s&&(l=en(l,Math.min(n[0],n[1]),Math.max(n[0],n[1]))),l}function tn(t,e){return`rgb(
      ${Ne(t,{from:e.from,to:[e.to[0][0],e.to[1][0]],clamp:e.clamp})},
      ${Ne(t,{from:e.from,to:[e.to[0][1],e.to[1][1]],clamp:e.clamp})},
      ${Ne(t,{from:e.from,to:[e.to[0][2],e.to[1][2]],clamp:e.clamp})}
    )`}function nn(t){if(t.substr(0,1)=="#"){var e=(t.length-1)/3,i=[17,1,.062272][e-1];return[Math.round(parseInt(t.substr(1,e),16)*i),Math.round(parseInt(t.substr(1+e,e),16)*i),Math.round(parseInt(t.substr(1+2*e,e),16)*i)]}else return t.split("(")[1].split(")")[0].split(",").map(n=>+n)}function sn(t,e,i={}){const{ignore:n=[],capture:s=!0}=i,l=window;if(!l)return()=>{};let r=!0,o=!1;const u=v=>n.some(_=>typeof _=="string"?Array.from(document.querySelectorAll(_)).some(b=>b===v.target||v.composedPath().includes(b)):_&&(v.target===_||v.composedPath().includes(_))),d=v=>{if(!(!t||t===v.target||v.composedPath().includes(t))){if(v.detail===0&&(r=!u(v)),!r){r=!0;return}e(v)}},p=v=>{o||(o=!0,setTimeout(()=>{o=!1},0),d(v))},m=v=>{r=!u(v)&&!!(t&&!v.composedPath().includes(t))};return l.addEventListener("click",p,{passive:!0,capture:s}),l.addEventListener("pointerdown",m,{passive:!0}),()=>{l.removeEventListener("click",p,{capture:s}),l.removeEventListener("pointerdown",m)}}function rn(t){const e=document.createElement("div");return e.appendChild(document.createTextNode(t)),e.innerHTML}function kt(t){return rn(t).replace(/(\/|\\)/g,i=>`${i}<wbr>`)}function on(t){let e,i;return e=new Yi({}),{c(){be(e.$$.fragment)},m(n,s){ue(e,n,s),i=!0},i(n){i||(L(e.$$.fragment,n),i=!0)},o(n){B(e.$$.fragment,n),i=!1},d(n){de(e,n)}}}function ln(t){let e,i;return e=new Zi({}),{c(){be(e.$$.fragment)},m(n,s){ue(e,n,s),i=!0},i(n){i||(L(e.$$.fragment,n),i=!0)},o(n){B(e.$$.fragment,n),i=!1},d(n){de(e,n)}}}function an(t){let e,i,n,s,l,r,o,u;const d=[ln,on],p=[];function m(h,v){return h[0].viewMode==="call-stack"?0:h[0].viewMode==="timeline"?1:-1}return~(r=m(t))&&(o=p[r]=d[r](t)),{c(){e=f("div"),i=f("div"),n=f("div"),s=I(t[2]),l=w(),o&&o.c(),a(n,"class","title svelte-f96okc"),a(i,"class","box svelte-f96okc"),a(e,"class","view-options svelte-f96okc")},m(h,v){S(h,e,v),c(e,i),c(i,n),c(n,s),c(i,l),~r&&p[r].m(i,null),t[3](i),u=!0},p(h,[v]){(!u||v&4)&&Ae(s,h[2]);let _=r;r=m(h),r!==_&&(o&&(De(),B(p[_],1,1,()=>{p[_]=null}),$e()),~r?(o=p[r],o||(o=p[r]=d[r](h),o.c()),L(o,1),o.m(i,null)):o=null)},i(h){u||(L(o),u=!0)},o(h){B(o),u=!1},d(h){h&&R(e),~r&&p[r].d(),t[3](null)}}}function cn(t,e,i){let n;_e(t,Ze,d=>i(0,n=d));const s=Ri();function l(){s("close")}let r;Vt(()=>{if(r)return sn(r,l,{ignore:[".js-view-options-button"]})});let o="View options";function u(d){He[d?"unshift":"push"](()=>{r=d,i(1,r)})}return t.$$.update=()=>{t.$$.dirty&1&&(n.viewMode==="call-stack"?i(2,o="Call stack view options"):n.viewMode==="timeline"&&i(2,o="Timeline view options"))},[n,r,o,u]}class un extends he{constructor(e){super(),fe(this,e,cn,an,le,{})}}function Wt(t){let e,i;return e=new un({}),e.$on("close",t[9]),{c(){be(e.$$.fragment)},m(n,s){ue(e,n,s),i=!0},p:M,i(n){i||(L(e.$$.fragment,n),i=!0)},o(n){B(e.$$.fragment,n),i=!1},d(n){de(e,n)}}}function dn(t){let e,i,n,s,l,r,o,u,d=kt(t[0].target_description)+"",p,m,h,v,_,b,E,y,A,P,V,U,F,C=t[0].sampleCount+"",H,g,k,$,Q,W,Re,te,ee,Z,Ee,G,Je,et,ae,K,tt,ie,me,pe,we,ve,Te,it,Ce,J,We,Me,nt;l=new Ui({}),Te=new Wi({});let z=t[1]&&Wt(t);return We=bt(t[7][0]),{c(){e=f("div"),i=f("div"),n=f("div"),s=f("div"),be(l.$$.fragment),r=w(),o=f("div"),u=f("div"),p=w(),m=f("div"),h=f("div"),v=f("span"),v.textContent="Recorded:",_=w(),b=f("span"),b.textContent=`${t[3]}`,E=w(),y=f("br"),A=w(),P=f("div"),V=f("span"),V.textContent="Samples:",U=w(),F=f("span"),H=I(C),g=w(),k=f("div"),$=f("span"),$.textContent="CPU utilization:",Q=w(),W=f("span"),W.textContent=`${(t[4]*100).toFixed(0)}%`,Re=w(),te=f("div"),ee=f("div"),Z=I(`View:
            `),Ee=f("label"),G=f("input"),Je=I(`
              Call stack`),et=w(),ae=f("label"),K=f("input"),tt=I(`
              Timeline`),ie=w(),me=f("div"),pe=w(),we=f("div"),ve=f("button"),be(Te.$$.fragment),it=I(`
              View options`),Ce=w(),z&&z.c(),a(s,"class","logo svelte-1u5a81f"),a(u,"class","target-description svelte-1u5a81f"),a(v,"class","metric-label svelte-1u5a81f"),a(b,"class","metric-value svelte-1u5a81f"),a(h,"class","metric date svelte-1u5a81f"),a(y,"class","svelte-1u5a81f"),a(V,"class","metric-label svelte-1u5a81f"),a(F,"class","metric-value svelte-1u5a81f"),a(P,"class","metric svelte-1u5a81f"),a($,"class","metric-label svelte-1u5a81f"),a(W,"class","metric-value svelte-1u5a81f"),a(k,"class","metric svelte-1u5a81f"),a(m,"class","metrics svelte-1u5a81f"),a(G,"type","radio"),G.__value="call-stack",ce(G,G.__value),a(G,"class","svelte-1u5a81f"),a(Ee,"class","svelte-1u5a81f"),a(K,"type","radio"),K.__value="timeline",ce(K,K.__value),a(K,"class","svelte-1u5a81f"),a(ae,"class","svelte-1u5a81f"),a(ee,"class","toggle"),a(me,"class","spacer"),Y(me,"flex","1"),a(ve,"class","js-view-options-button svelte-1u5a81f"),a(we,"class","button-container svelte-1u5a81f"),a(te,"class","view-options svelte-1u5a81f"),a(o,"class","layout svelte-1u5a81f"),a(n,"class","row svelte-1u5a81f"),a(i,"class","margins"),a(e,"class","header svelte-1u5a81f"),We.p(G,K)},m(D,j){S(D,e,j),c(e,i),c(i,n),c(n,s),ue(l,s,null),c(n,r),c(n,o),c(o,u),u.innerHTML=d,c(o,p),c(o,m),c(m,h),c(h,v),c(h,_),c(h,b),c(m,E),c(m,y),c(m,A),c(m,P),c(P,V),c(P,U),c(P,F),c(F,H),c(m,g),c(m,k),c(k,$),c(k,Q),c(k,W),c(o,Re),c(o,te),c(te,ee),c(ee,Z),c(ee,Ee),c(Ee,G),G.checked=G.__value===t[2].viewMode,c(Ee,Je),c(ee,et),c(ee,ae),c(ae,K),K.checked=K.__value===t[2].viewMode,c(ae,tt),c(te,ie),c(te,me),c(te,pe),c(te,we),c(we,ve),ue(Te,ve,null),c(ve,it),c(we,Ce),z&&z.m(we,null),J=!0,Me||(nt=[N(G,"change",t[6]),N(K,"change",t[8]),N(ve,"click",_t(gt(t[5])))],Me=!0)},p(D,[j]){(!J||j&1)&&d!==(d=kt(D[0].target_description)+"")&&(u.innerHTML=d),(!J||j&1)&&C!==(C=D[0].sampleCount+"")&&Ae(H,C),j&4&&(G.checked=G.__value===D[2].viewMode),j&4&&(K.checked=K.__value===D[2].viewMode),D[1]?z?(z.p(D,j),j&2&&L(z,1)):(z=Wt(D),z.c(),L(z,1),z.m(we,null)):z&&(De(),B(z,1,1,()=>{z=null}),$e())},i(D){J||(L(l.$$.fragment,D),L(Te.$$.fragment,D),L(z),J=!0)},o(D){B(l.$$.fragment,D),B(Te.$$.fragment,D),B(z),J=!1},d(D){D&&R(e),de(l),de(Te),z&&z.d(),We.r(),Me=!1,oe(nt)}}}function fn(t,e,i){let n;_e(t,Ze,v=>i(2,n=v));let{session:s}=e;const l=new Date(s.startTime*1e3).toLocaleString(void 0,{dateStyle:"long",timeStyle:"medium"}),r=s.cpuTime/s.duration;let o=!1;function u(v){i(1,o=!o)}const d=[[]];function p(){n.viewMode=this.__value,Ze.set(n)}function m(){n.viewMode=this.__value,Ze.set(n)}const h=()=>i(1,o=!1);return t.$$set=v=>{"session"in v&&i(0,s=v.session)},[s,o,n,l,r,u,p,d,m,h]}class hn extends he{constructor(e){super(),fe(this,e,fn,dn,le,{session:0})}}const mn="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAACXBIWXMAABYlAAAWJQFJUiTwAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAWmSURBVHgBtVc7i11VFF5rn3PvPKoLFlqmDGPhaGVpJQoWAZEEGxERFBsDgnY6KFpaWWrQysRGf4BgmSKQFCKWKQMKTqNzz2svv/XY55ybeycTCw+z736cs/f61rdee5hmz/Hx85c66m4QyTEzrdAo4cd6EuuJ2P4wtbmUgfZkCyRoWVcwyMI29ybW47sfhRfXf793+z4X4ZchPEl3F2esElYrbRVaEjQGEKGE3jcUofGwlIEBygoACAa0fmDrdV4AOAg6FV4+W49nUPdlEW4AElGNtqjZ+hqIdI2NAC7KuvAZloyJCR+IukGmF5A6iH/IbEBWLN2NevbBFQ6tCoAF3u7VggYQtQJyFlygOAADI74Jf669QDiWWh6xFRMUgLF6PAGYkcgGgGkBE/x8AiSVaykG0AUxlgm7BY0BUMAQL8R77LM96F98A98kBeu+kAdlgA0MntUGACmOFDQl5sm+Rai6lwpMLtiEgSVGE8wVFBkAB7XcU+rdJOoLSU0x8Aii3ta/0AWqMHjlM6LDPaYDHLSsnRn9pjMny2jBCDSu9H3tDqpCmw4C6lgHqAQmWB05uwwF8RCAQpU7jIbQYCElBsjAlabfqJdnD7lKwzVcIVVOgmKpF2g921pS8/QRvuETmwDEKZdwFHMocYHffYSfBc0opojVIomjx/dY64CkxVktMsgar16/IhbKygANruwWA+YDkURUcNHQaK5ps1XhBwaAzf6M9YzWq3Ac1EKACm80cB8KV6IdPsCR0aQAMBAaUkxXPyU6WDqlypKaSEOtmCCpDyAKFgu1gSecrhdar4n++VsiGUVWDHUpdJkYEPEkEyDc7paHTShXbkuNhqQfaF5wMt16lff69JYFFYT3A8AYgFxku5xtBtw9R7YsEiH85hcYLIsfuO0lfCCHvTtMWxszNRhDebp+LRsTGobFr0zBiO5tBnhWaZgiDwD5gi3Wiw+YcDAwoDfB+MaFq83RsP8M5zSYdFjsBwfh9YAjErbyQLHNVNUsH2Dl2odCh4dE+0vQXjtI9YG2z05zOKvSbdR3eKdtLTbugVKzoOQxC+7KA5NtJPiXEZaH5xDglMrOBMHTWxdWhA/QVqtgEdx3EtVwSkDOxE4GHESpCZzcHLe+4gg3HA7P69jpfvutTA0GTQNNkXAs5UYJVjC593keik/JBohzALjQsXbrJtRksRgntzm7nVX4GnZumtC4D23N4aIAZWdv9LyZv+3IA87AlHY1HQu9+q7Qwb7nAQ01FbQ+g5NBaNOKA2jdD0bg4+UjzCrbqu6IgrLB6aLRF6KWB0ZNUj15QvLCRVa8PNanqiq7pM7kbVXDEvdaipMmHIRfBa2//aYC9WI5vjH6ydLsB1ezpePiK9PhYcoLnjSK5kljNUWqvXppKdVxo4XFhIsJ93gXy/8clxIvt0X7i4XrU8+1D+wGgKPGW/UCzHfew9VsXywVZxbz8GYdKqS4rCTfZ/NZvD8WA/Yxu/aW661F7q+cIbsXVO6EcVf3b0t9SIXFx9N+kwEO3w8QVmhggq+/9xSroVdiv5TZlr0SanL6/KXOK5SaL9b/G4DRdDzONZbPuAjXS4bnfPWBPrJkjhzpYbdR8OeXz62nvBt3HD3z3F/2f0Fyx9O7XL2HAoj7YG33AK8Bag4TrJlOa0DrrVtrj7DsPBtKlgstsZGIcOW+B0wvlMP1EOqcCh1rTldb+/Xcw2woqbaLeh/Vbl7vH/Vgx08TABrehO53ccJKK1ZWP+gjpRqAKdaN8jxLs5r7Bx5TMBm18kjxOOZ0ub/3flUW/nzw4PSJp568CT0vYXq5aGJgslc4o7doPI6dcis2eUq950Ug1DqF9NvQ/uVf79y5v+E1IptedEInNj+iT2L9Nfv9jf7gI/pFdP4D5rfoaYw/Lv+pReVRq/JOEEXOee/PAf7/PP8C3bt510T4rIwAAAAASUVORK5CYII=",zt=rt({}),Ut=rt({});function Gt(t){return t>.6?"#FF4159":t>.3?"#F5A623":t>.2?"#D8CB2A":"#7ED321"}function Kt(t,e,i){const n=t.slice();return n[21]=e[i],n}function Xt(t){let e,i,n,s,l,r,o,u,d,p,m,h,v,_,b,E;return{c(){e=f("div"),i=f("div"),n=O("svg"),s=O("path"),l=w(),r=f("div"),o=I(t[5]),u=w(),d=f("div"),p=I(t[4]),m=w(),h=f("div"),h.textContent=`${t[11]}`,v=w(),_=f("div"),a(s,"d","M.937-.016L5.793 4.84.937 9.696z"),a(s,"fill",t[7]),a(s,"fill-rule","evenodd"),a(s,"fill-opacity",".582"),a(n,"width","6"),a(n,"height","10"),a(i,"class","frame-triangle svelte-14yvyii"),ke(i,"rotate",!t[8]),Y(i,"visibility",t[0].children.length>0?"visible":"hidden"),a(r,"class","time svelte-14yvyii"),Y(r,"color",t[7]),Y(r,"font-weight",t[10]<.2?500:600),a(d,"class","name svelte-14yvyii"),a(h,"class","code-position svelte-14yvyii"),a(e,"class","frame-description svelte-14yvyii"),a(e,"role","button"),a(e,"tabindex","0"),ke(e,"application-code",t[0].isApplicationCode),ke(e,"children-visible",!t[8]),Y(e,"padding-left",`${t[2]*35}px`),a(_,"class","visual-guide svelte-14yvyii"),Y(_,"left",`${t[2]*35+21}px`),Y(_,"backgroundColor",t[7])},m(y,A){S(y,e,A),c(e,i),c(i,n),c(n,s),c(e,l),c(e,r),c(r,o),c(e,u),c(e,d),c(d,p),c(e,m),c(e,h),S(y,v,A),S(y,_,A),b||(E=[N(e,"keydown",t[14]),N(e,"click",_t(gt(t[12])))],b=!0)},p(y,A){A&128&&a(s,"fill",y[7]),A&256&&ke(i,"rotate",!y[8]),A&1&&Y(i,"visibility",y[0].children.length>0?"visible":"hidden"),A&32&&Ae(o,y[5]),A&128&&Y(r,"color",y[7]),A&16&&Ae(p,y[4]),A&1&&ke(e,"application-code",y[0].isApplicationCode),A&256&&ke(e,"children-visible",!y[8]),A&4&&Y(e,"padding-left",`${y[2]*35}px`),A&4&&Y(_,"left",`${y[2]*35+21}px`),A&128&&Y(_,"backgroundColor",y[7])},d(y){y&&(R(e),R(v),R(_)),b=!1,oe(E)}}}function Qt(t){let e,i,n,s,l=t[0].group.frames.length+"",r,o,u,d,p,m;return{c(){e=f("div"),i=f("div"),n=f("div"),n.innerHTML='<svg width="6" height="10"><path d="M.937-.016L5.793 4.84.937 9.696z" fill="#FFF" fill-rule="evenodd" fill-opacity=".582"></path></svg>',s=w(),r=I(l),o=I(" frames hidden ("),u=I(t[6]),d=I(")"),a(n,"class","group-triangle svelte-14yvyii"),ke(n,"rotate",t[9]),a(i,"class","group-header-button svelte-14yvyii"),a(e,"class","group-header svelte-14yvyii"),a(e,"role","button"),a(e,"tabindex","0"),Y(e,"padding-left",`${t[2]*35}px`)},m(h,v){S(h,e,v),c(e,i),c(i,n),c(i,s),c(i,r),c(i,o),c(i,u),c(i,d),p||(m=[N(e,"keydown",t[15]),N(e,"click",_t(gt(t[13])))],p=!0)},p(h,v){v&512&&ke(n,"rotate",h[9]),v&1&&l!==(l=h[0].group.frames.length+"")&&Ae(r,l),v&64&&Ae(u,h[6]),v&4&&Y(e,"padding-left",`${h[2]*35}px`)},d(h){h&&R(e),p=!1,oe(m)}}}function Zt(t){let e,i=[],n=new Map,s,l=Ot(t[0].children);const r=o=>o[21].uuid;for(let o=0;o<l.length;o+=1){let u=Kt(t,l,o),d=r(u);n.set(d,i[o]=jt(d,u))}return{c(){e=f("div");for(let o=0;o<i.length;o+=1)i[o].c();a(e,"class","children svelte-14yvyii")},m(o,u){S(o,e,u);for(let d=0;d<i.length;d+=1)i[d]&&i[d].m(e,null);s=!0},p(o,u){u&15&&(l=Ot(o[0].children),De(),i=$i(i,u,r,1,o,l,n,e,Di,jt,null,Kt),$e())},i(o){if(!s){for(let u=0;u<l.length;u+=1)L(i[u]);s=!0}},o(o){for(let u=0;u<i.length;u+=1)B(i[u]);s=!1},d(o){o&&R(e);for(let u=0;u<i.length;u+=1)i[u].d()}}}function jt(t,e){let i,n,s;return n=new Jt({props:{frame:e[21],rootFrame:e[1],indent:e[2]+(e[3]?1:0)}}),{key:t,first:null,c(){i=Mi(),be(n.$$.fragment),this.first=i},m(l,r){S(l,i,r),ue(n,l,r),s=!0},p(l,r){e=l;const o={};r&1&&(o.frame=e[21]),r&2&&(o.rootFrame=e[1]),r&12&&(o.indent=e[2]+(e[3]?1:0)),n.$set(o)},i(l){s||(L(n.$$.fragment,l),s=!0)},o(l){B(n.$$.fragment,l),s=!1},d(l){l&&R(i),de(n,l)}}}function pn(t){let e,i,n,s,l=t[3]&&Xt(t),r=t[0].group&&t[0].group.rootFrame==t[0]&&!t[8]&&Qt(t),o=!t[8]&&t[0].children.length>0&&Zt(t);return{c(){e=f("div"),l&&l.c(),i=w(),r&&r.c(),n=w(),o&&o.c(),a(e,"class","frame svelte-14yvyii")},m(u,d){S(u,e,d),l&&l.m(e,null),c(e,i),r&&r.m(e,null),c(e,n),o&&o.m(e,null),s=!0},p(u,[d]){u[3]?l?l.p(u,d):(l=Xt(u),l.c(),l.m(e,i)):l&&(l.d(1),l=null),u[0].group&&u[0].group.rootFrame==u[0]&&!u[8]?r?r.p(u,d):(r=Qt(u),r.c(),r.m(e,n)):r&&(r.d(1),r=null),!u[8]&&u[0].children.length>0?o?(o.p(u,d),d&257&&L(o,1)):(o=Zt(u),o.c(),L(o,1),o.m(e,null)):o&&(De(),B(o,1,1,()=>{o=null}),$e())},i(u){s||(L(o),s=!0)},o(u){B(o),s=!1},d(u){u&&R(e),l&&l.d(),r&&r.d(),o&&o.d()}}}function qt(){const t='a:not([disabled]), button:not([disabled]), input[type=text]:not([disabled]), [tabindex]:not([disabled]):not([tabindex="-1"])',e=document.querySelector(".call-stack-view");if(!e)throw new Error("callStackElement not found");var i=Array.prototype.filter.call(e.querySelectorAll(t),function(n){return n.offsetWidth>0||n.offsetHeight>0||n===document.activeElement});return i}function Yt(){const t=qt();var e=t.indexOf(document.activeElement);if(e>-1){var i=t[e+1];i&&i.focus()}}function xt(){const t=qt();var e=t.indexOf(document.activeElement);if(e>-1){var i=t[e-1];i&&i.focus()}}function vn(t,e,i){var H;let n,s,l,r,o;_e(t,Ut,g=>i(16,l=g)),_e(t,zt,g=>i(17,r=g)),_e(t,x,g=>i(18,o=g));let{frame:u}=e,{rootFrame:d}=e,{indent:p=0}=e,m;const h=u.time/d.time;let v;const _=`${u.filePathShort}:${(H=u.lineNo)==null?void 0:H.toString().padEnd(4,"Â ")}`;let b,E=null;if(u.group){const g=u.group.libraries;g.length<4?E=g.join(", "):E=`${g[0]}, ${g[1]}, ${g[2]}...`}let y;y=Gt(h);function A(g){P(u,!s,g.altKey)}function P(g,k,$=!0){if(Ut.update(Q=>({...Q,[g.uuid]:k})),$)for(const Q of g.children)P(Q,k,!0),g.group&&g.group.rootFrame==g&&V(g.group.id,!k)}function V(g,k){zt.update($=>({...$,[g]:k}))}function U(){u.group&&V(u.group.id,!n)}function F(g){let k=!0;g.key==="Enter"||g.key===" "?A(g):g.key==="ArrowLeft"&&!s?P(u,!0,g.altKey):g.key==="ArrowRight"&&s?P(u,!1,g.altKey):g.key==="ArrowUp"?xt():g.key==="ArrowDown"?Yt():k=!1,k&&(g.preventDefault(),g.stopPropagation())}function C(g){let k=!0;g.key==="Enter"||g.key===" "?U():g.key==="ArrowLeft"&&u.group?V(u.group.id,!1):g.key==="ArrowRight"&&u.group?V(u.group.id,!0):g.key==="ArrowUp"?xt():g.key==="ArrowDown"?Yt():k=!1,k&&(g.preventDefault(),g.stopPropagation())}return t.$$set=g=>{"frame"in g&&i(0,u=g.frame),"rootFrame"in g&&i(1,d=g.rootFrame),"indent"in g&&i(2,p=g.indent)},t.$$.update=()=>{var g,k;if(t.$$.dirty&131073&&(u.group?r[u.group.id??""]||((g=u.group)==null?void 0:g.rootFrame)===u||u.children.filter($=>!$.group).length>1?i(3,m=!0):i(3,m=!1):i(3,m=!0)),t.$$.dirty&1&&(u.className?i(4,v=`${u.className}.${u.function}`):i(4,v=u.function)),t.$$.dirty&262145)if(o.timeFormat==="absolute")i(5,b=u.time.toLocaleString(void 0,{minimumFractionDigits:3,maximumFractionDigits:3}));else if(o.timeFormat==="proportion")i(5,b=`${(h*100).toLocaleString(void 0,{minimumFractionDigits:1,maximumFractionDigits:1})}%`);else throw new Error("unknown timeFormat");t.$$.dirty&131073&&i(9,n=r[((k=u.group)==null?void 0:k.id)??""]===!0),t.$$.dirty&65537&&i(8,s=l[u.uuid]===!0)},[u,d,p,m,v,b,E,y,s,n,h,_,A,U,F,C,l,r,o]}let Jt=class extends he{constructor(e){super(),fe(this,e,vn,pn,le,{frame:0,rootFrame:1,indent:2})}};function ei(t,e,i){let n=t;for(const s of e)if(n=s(n,i),!n)return null;return n}for(var X=[],Et=0;Et<256;++Et)X.push((Et+256).toString(16).slice(1));function gn(t,e=0){return(X[t[e+0]]+X[t[e+1]]+X[t[e+2]]+X[t[e+3]]+"-"+X[t[e+4]]+X[t[e+5]]+"-"+X[t[e+6]]+X[t[e+7]]+"-"+X[t[e+8]]+X[t[e+9]]+"-"+X[t[e+10]]+X[t[e+11]]+X[t[e+12]]+X[t[e+13]]+X[t[e+14]]+X[t[e+15]]).toLowerCase()}var ot,_n=new Uint8Array(16);function bn(){if(!ot&&(ot=typeof crypto<"u"&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto),!ot))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return ot(_n)}var wn=typeof crypto<"u"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto);const ti={randomUUID:wn};function yn(t,e,i){if(ti.randomUUID&&!e&&!t)return ti.randomUUID();t=t||{};var n=t.random||(t.rng||bn)();return n[6]=n[6]&15|64,n[8]=n[8]&63|128,gn(n)}const An="\0",Tn="[await]",qe="[self]",Cn=[Tn,qe,"[out-of-context]","[root]"],kn="c",En="h";class Ye{constructor(e,i){T(this,"uuid",yn());T(this,"identifier");T(this,"_identifierParts");T(this,"startTime");T(this,"time",0);T(this,"absorbedTime",0);T(this,"group",null);T(this,"attributes");T(this,"_children",[]);T(this,"parent",null);T(this,"context");var l;this.identifier=e.identifier,this._identifierParts=this.identifier.split(An),this.startTime=e.startTime??0,this.time=e.time??0,this.attributes=e.attributes??{},this.context=i;let n=this.startTime;const s=(l=e.children)==null?void 0:l.map(r=>(r.startTime===void 0&&(r={...r,startTime:n},n+=r.time??0),n=r.startTime+(r.time??0),new Ye(r,i)));s&&this.addChildren(s)}cloneDeep(){return new Ye(this,this.context)}get children(){return this._children}addChild(e,i={}){if(e.removeFromParent(),e.parent=this,i.after){const n=this._children.indexOf(i.after);if(n==-1)throw new Error("After frame not found");this._children.splice(n+1,0,e)}else this._children.push(e)}addChildren(e,i={}){e=e.slice(),i.after?(e.slice().reverse(),e.forEach(s=>this.addChild(s,i))):e.forEach(n=>this.addChild(n,i))}removeFromParent(){if(this.parent){const e=this.parent._children.indexOf(this);this.parent._children.splice(e,1),this.parent=null}}getAttributes(e){return Object.keys(this.attributes).filter(n=>n.startsWith(e)).map(n=>({data:n.slice(1),time:this.attributes[n]}))}getAttributeValue(e){const i=this.getAttributes(e);if(!i||i.length==0)return null;let n=0;for(let s=0;s<i.length;s++)i[s].time>i[n].time&&(n=s);return i[n].data}get hasTracebackHide(){return this.getAttributeValue(En)=="1"}get function(){return this._identifierParts[0]}get filePath(){return this._identifierParts[1]??null}get lineNo(){const e=this._identifierParts[2];return e?parseInt(e):null}get isSynthetic(){return Cn.includes(this.identifier)}get filePathShort(){return this.isSynthetic&&this.parent?this.parent.filePathShort:this.filePath?this.context.shortenPath(this.filePath):null}get isApplicationCode(){if(this.isSynthetic)return!1;const e=this.filePath;return!e||this.context.sysPrefixes.some(n=>e.startsWith(n))?!1:e.startsWith("<")?e.startsWith("<ipython-input-")?!0:e=="<string>"||e=="<stdin>"?this.parent?this.parent.isApplicationCode:!0:!1:!0}get proportionOfParent(){return this.parent?this.time/this.parent.time:1}get className(){return this.getAttributeValue(kn)??""}get library(){const e=this.filePathShort;return e?/^[^\\/.]*/.exec(e)[0]:null}}class Mn{constructor(e){T(this,"id");T(this,"rootFrame");T(this,"_frames",[]);this.id=crypto.randomUUID(),this.rootFrame=e}addFrame(e){e.group&&e.group.removeFrame(e),this._frames.push(e),e.group=this}removeFrame(e){if(e.group!==this)throw new Error("Frame not in group.");const i=this._frames.indexOf(e);if(i===-1)throw new Error("Frame not found in group.");this._frames.splice(i,1),e.group=null}get frames(){return this._frames}get exitFrames(){const e=[];for(const i of this.frames){let n=!1;for(const s of i.children)if(s.group!=this){n=!0;break}n&&e.push(i)}return e}get libraries(){const e=[];for(const i of this.frames){const n=i.library;n&&(e.includes(n)||e.push(n))}return e}}function lt(t,e){const{replaceWith:i}=e,n=t.parent;if(!n)throw new Error("Cannot delete the root frame");if(i=="children")n.addChildren(t.children,{after:t});else if(i=="self_time")n.addChild(new Ye({identifier:qe,time:t.time},n.context),{after:t});else if(i=="nothing")n.absorbedTime+=t.time;else throw new xi(i);t.removeFromParent(),Mt(t,!0)}function Fn(t,e){if(t.parent!==e.parent)throw new Error("Both frames must have the same parent.");e.absorbedTime+=t.absorbedTime,e.time+=t.time,Object.entries(t.attributes).forEach(([i,n])=>{e.attributes[i]!==void 0?e.attributes[i]+=n:e.attributes[i]=n}),e.addChildren(t.children),t.removeFromParent(),Mt(t,!1)}function Mt(t,e){if(e&&t.children&&t.children.forEach(i=>{Mt(i,!0)}),t.group){const i=t.group;i.removeFrame(t),i.frames.length===1&&i.removeFrame(i.frames[0])}}function Ft(t,e){if(!t)return null;for(const i of t.children)Ft(i),i.filePath&&i.filePath.includes("<frozen importlib._bootstrap")&&lt(i,{replaceWith:"children"});return t}function Pt(t,e){if(!t)return null;for(const i of t.children)Pt(i),i.hasTracebackHide&&lt(i,{replaceWith:"children"});return t}function ii(t,e){if(!t)return null;const i={};for(const n of t.children.slice())if(i[n.identifier]){const s=i[n.identifier];Fn(n,s)}else i[n.identifier]=n;return t.children.forEach(n=>ii(n)),t._children.sort((n,s)=>s.time-n.time),t}function ni(t,e){if(!t)return null;const i=e.hideRegex,n=e.showRegex;function s(r){const o=r.filePath||"",u=n&&new RegExp(n).test(o),d=i&&new RegExp(i).test(o);return u?!1:d?!0:!r.isApplicationCode}function l(r,o){o.addFrame(r),r.children.forEach(u=>{s(u)&&l(u,o)})}return t.children.forEach(r=>{if(!r.group&&s(r)&&r.children.some(s)){const o=new Mn(r);l(r,o)}ni(r,e)}),t}function si(t,e,i=!0){if(!t)return null;let n=null;for(const s of t.children)s.identifier===qe?n?(n.time+=s.time,s.removeFromParent()):n=s:n=null;return i&&t.children.forEach(s=>si(s,e,!0)),t}function ri(t,e){return t?(t.children.length===1&&t.children[0].identifier===qe&&lt(t.children[0],{replaceWith:"nothing"}),t.children.forEach(i=>ri(i)),t):null}function oi(t,e,i=null){if(!t)return null;i===null&&(i=t.time,i<=0&&(i=1e-44));const n=e.filterThreshold??.01;for(const s of t.children.slice())s.time/i<n&&lt(s,{replaceWith:"nothing"});return t.children.forEach(s=>oi(s,e,i)),t}function li(t,e){if(!t)return null;const i=r=>{var o;return((o=r.filePath)==null?void 0:o.includes("pyinstrument/__main__.py"))&&r.children.length>0},n=r=>{var o;return r.proportionOfParent>.8&&((o=r.filePath)==null?void 0:o.includes("<string>"))&&r.children.length>0},s=r=>{var o;return r.proportionOfParent>.8&&(new RegExp(".*runpy.py").test(r.filePath??"")||((o=r.filePath)==null?void 0:o.includes("<frozen runpy>")))&&r.children.length>0};let l=t;if(!i(l)||(l=l.children[0],!n(l))||(l=l.children[0],!s(l)))return t;for(;s(l);)l=l.children[0];return l.removeFromParent(),l}function Pn(t){let e,i,n;return i=new Jt({props:{frame:t[2],rootFrame:t[2]}}),{c(){e=f("div"),be(i.$$.fragment),a(e,"class","call-stack-margins svelte-1m7g2ko")},m(s,l){S(s,e,l),ue(i,e,null),n=!0},p(s,l){const r={};l&4&&(r.frame=s[2]),l&4&&(r.rootFrame=s[2]),i.$set(r)},i(s){n||(L(i.$$.fragment,s),n=!0)},o(s){B(i.$$.fragment,s),n=!1},d(s){s&&R(e),de(i)}}}function In(t){let e;return{c(){e=f("div"),e.innerHTML='<div class="error">All frames were filtered out.</div>',a(e,"class","margins")},m(i,n){S(i,e,n)},p:M,i:M,o:M,d(i){i&&R(e)}}}function Rn(t){let e,i,n,s,l;const r=[In,Pn],o=[];function u(d,p){return d[2]?1:0}return n=u(t),s=o[n]=r[n](t),{c(){e=f("div"),i=f("div"),s.c(),a(i,"class","scroll-inner svelte-1m7g2ko"),a(e,"class","call-stack-view svelte-1m7g2ko")},m(d,p){S(d,e,p),c(e,i),o[n].m(i,null),t[6](i),t[7](e),l=!0},p(d,[p]){let m=n;n=u(d),n===m?o[n].p(d,p):(De(),B(o[m],1,1,()=>{o[m]=null}),$e(),s=o[n],s?s.p(d,p):(s=o[n]=r[n](d),s.c()),L(s,1),s.m(i,null))},i(d){l||(L(s),l=!0)},o(d){B(s),l=!1},d(d){d&&R(e),o[n].d(),t[6](null),t[7](null)}}}function Sn(t,e,i){let n,{session:s}=e;const l=Nt([x],([m])=>{const h=[m.removeImportlib?Ft:null,m.removeTracebackHide?Pt:null,si,ii,ri,m.removeIrrelevant?oi:null,m.removePyinstrument?li:null,m.collapseMode!=="disabled"?ni:null].filter(_=>_!==null),v={filterThreshold:m.removeIrrelevantThreshold,hideRegex:m.collapseMode=="custom"?m.collapseCustomHide:void 0,showRegex:m.collapseMode=="custom"?m.collapseCustomShow:void 0};return{processors:h,options:v}});_e(t,l,m=>i(5,n=m));let r,o;Vt(()=>{const m=r;if(!m)throw new Error("element not set");let h;return m.addEventListener("scroll",h=()=>{i(1,o.style.minHeight=`${m.scrollTop+m.clientHeight}px`,o)}),h(),()=>{m.removeEventListener("scroll",h)}});let u;function d(m){He[m?"unshift":"push"](()=>{o=m,i(1,o)})}function p(m){He[m?"unshift":"push"](()=>{r=m,i(0,r)})}return t.$$set=m=>{"session"in m&&i(4,s=m.session)},t.$$.update=()=>{t.$$.dirty&48&&i(2,u=ei(s.rootFrame.cloneDeep(),n.processors,n.options))},[r,o,u,l,s,n,d,p]}class Hn extends he{constructor(e){super(),fe(this,e,Sn,Rn,le,{session:4})}}class Ln{constructor(e){T(this,"mediaQueryList",null);this.onDevicePixelRatioChanged=e,this._onChange=this._onChange.bind(this),this.createMediaQueryList()}createMediaQueryList(){this.removeMediaQueryList();let e=`(resolution: ${window.devicePixelRatio}dppx)`;this.mediaQueryList=matchMedia(e),this.mediaQueryList.addEventListener("change",this._onChange)}removeMediaQueryList(){var e;(e=this.mediaQueryList)==null||e.removeEventListener("change",this._onChange),this.mediaQueryList=null}_onChange(e){this.onDevicePixelRatioChanged(),this.createMediaQueryList()}destroy(){this.removeMediaQueryList()}}class Vn{constructor(e){T(this,"canvas");T(this,"_size_observer");T(this,"_devicePixelRatioObserver");T(this,"drawAnimationRequest",null);this.container=e,getComputedStyle(e).position!="absolute"&&(e.style.position="relative"),this.canvas=document.createElement("canvas"),this.canvas.style.position="absolute",this.canvas.style.left="0",this.canvas.style.top="0",this.canvas.style.width="100%",this.canvas.style.height="100%",this.container.appendChild(this.canvas),this.setCanvasSize=this.setCanvasSize.bind(this),this._size_observer=new ResizeObserver(this.setCanvasSize),this._size_observer.observe(e),this._devicePixelRatioObserver=new Ln(this.setCanvasSize),window.requestAnimationFrame(()=>{this.setCanvasSize()})}destroy(){this._size_observer.disconnect(),this._devicePixelRatioObserver.destroy(),this.canvas.remove(),this.drawAnimationRequest!==null&&(window.cancelAnimationFrame(this.drawAnimationRequest),this.drawAnimationRequest=null)}setNeedsRedraw(){this.drawAnimationRequest===null&&(this.drawAnimationRequest=window.requestAnimationFrame(()=>{this.drawAnimationRequest=null,this.canvasViewRedraw()}))}redrawIfNeeded(){this.drawAnimationRequest!==null&&(window.cancelAnimationFrame(this.drawAnimationRequest),this.drawAnimationRequest=null,this.canvasViewRedraw())}canvasViewRedraw(){const e=this.canvas.getContext("2d");e&&(e.resetTransform(),e.scale(window.devicePixelRatio,window.devicePixelRatio),this.redraw(e,{width:this.canvas.width/window.devicePixelRatio,height:this.canvas.height/window.devicePixelRatio}))}get width(){return this.canvas.width/window.devicePixelRatio}get height(){return this.canvas.height/window.devicePixelRatio}setCanvasSize(){const e=window.devicePixelRatio;this.canvas.height=this.container.clientHeight*e,this.canvas.width=this.container.clientWidth*e,this.canvasViewRedraw()}}function Dn(t){let e,i=t[2]=="self"?"self":"time",n,s,l,r=t[3](t[0].time)+"";return{c(){e=f("div"),n=I(i),s=w(),l=f("div"),a(e,"class","label svelte-ci3g2p"),a(l,"class","time-val svelte-ci3g2p")},m(o,u){S(o,e,u),c(e,n),S(o,s,u),S(o,l,u),l.innerHTML=r},p(o,u){u&4&&i!==(i=o[2]=="self"?"self":"time")&&Ae(n,i),u&1&&r!==(r=o[3](o[0].time)+"")&&(l.innerHTML=r)},d(o){o&&(R(e),R(s),R(l))}}}function $n(t){let e,i,n,s,l=t[3](t[0].time)+"",r,o=t[0].selfTime/t[0].time>.001&&ai(t);return{c(){e=f("div"),e.textContent="time",i=w(),n=f("div"),s=f("div"),r=w(),o&&o.c(),a(e,"class","label svelte-ci3g2p"),a(s,"class","time-val svelte-ci3g2p"),a(n,"class","time-row svelte-ci3g2p")},m(u,d){S(u,e,d),S(u,i,d),S(u,n,d),c(n,s),s.innerHTML=l,c(n,r),o&&o.m(n,null)},p(u,d){d&1&&l!==(l=u[3](u[0].time)+"")&&(s.innerHTML=l),u[0].selfTime/u[0].time>.001?o?o.p(u,d):(o=ai(u),o.c(),o.m(n,null)):o&&(o.d(1),o=null)},d(u){u&&(R(e),R(i),R(n)),o&&o.d()}}}function ai(t){let e,i,n,s=t[3](t[0].selfTime)+"";return{c(){e=f("div"),e.textContent="self",i=w(),n=f("div"),a(e,"class","label svelte-ci3g2p"),a(n,"class","time-val svelte-ci3g2p")},m(l,r){S(l,e,r),S(l,i,r),S(l,n,r),n.innerHTML=s},p(l,r){r&1&&s!==(s=l[3](l[0].selfTime)+"")&&(n.innerHTML=s)},d(l){l&&(R(e),R(i),R(n))}}}function On(t){let e,i,n=t[0].name+"",s,l,r,o,u,d,p,m,h,v;function _(y,A){return y[2]=="both"?$n:Dn}let b=_(t),E=b(t);return{c(){e=f("div"),i=f("div"),s=I(n),l=w(),E.c(),r=w(),o=f("div"),o.textContent="loc",u=w(),d=f("div"),p=f("div"),h=w(),v=new Ii(!1),a(i,"class","name svelte-ci3g2p"),a(o,"class","label svelte-ci3g2p"),a(p,"class","location-color svelte-ci3g2p"),a(p,"style",m=`background: ${t[0].locationColor}`),v.a=null,a(d,"class","location-row"),a(e,"class","timeline-canvas-view-tooltip svelte-ci3g2p"),a(e,"style",`font: ${ui}; max-width: ${Bn}px;`)},m(y,A){S(y,e,A),c(e,i),c(i,s),c(e,l),E.m(e,null),c(e,r),c(e,o),c(e,u),c(e,d),c(d,p),c(d,h),v.m(t[1],d)},p(y,[A]){A&1&&n!==(n=y[0].name+"")&&Ae(s,n),b===(b=_(y))&&E?E.p(y,A):(E.d(1),E=b(y),E&&(E.c(),E.m(e,r))),A&1&&m!==(m=`background: ${y[0].locationColor}`)&&a(p,"style",m),A&2&&v.p(y[1])},i:M,o:M,d(y){y&&R(e),E.d()}}}function ci(t){return t.selfTime==t.time?"self":t.selfTime/t.time>.001?"both":"time"}function Nn(t,e){t.font=ui;const i=ci(e)=="both"?140:70,n=t.measureText(e.name).width,s=t.measureText(e.location).width+46;let r=Math.max(i,n,s)+20;return r>310&&(r=310),r}const Bn=310,ui="400 13px Source Sans Pro, sans-serif";function Wn(t,e,i){let{f:n}=e,s,l;function r(o){return`<span style="color: ${Gt(o/n.totalTime)}">${o.toFixed(3)}</span>`}return t.$$set=o=>{"f"in o&&i(0,n=o.f)},t.$$.update=()=>{t.$$.dirty&1&&i(1,s=kt(n.location)),t.$$.dirty&1&&i(2,l=ci(n))},[n,s,l,r]}class zn extends he{constructor(e){super(),fe(this,e,Wn,On,le,{f:0})}}const Un="#212325",Gn=18,Kn=17,xe=28,at=17,Xn=29,Qn=["#47A298","#8AAE5D","#C1A731","#C07210","#B84210","#B53134","#9A3586","#4958B5","#3475BA","#318DBC","#47A298"].map(nn);class Zn extends Vn{constructor(i){super(i);T(this,"zoom",1);T(this,"startT",0);T(this,"frames",[]);T(this,"isZoomedIn",!1);T(this,"tooltipContainer");T(this,"tooltipComponent",null);T(this,"_rootFrame",null);T(this,"_frameMaxT");T(this,"lastDrawWidth",0);T(this,"lastDrawHeight",0);T(this,"mouseLocation",null);T(this,"_libraryOrder",null);T(this,"_colors",[]);this.onWheel=this.onWheel.bind(this),this.onMouseMove=this.onMouseMove.bind(this),this.onMouseLeave=this.onMouseLeave.bind(this),this.canvas.addEventListener("wheel",this.onWheel),this.canvas.addEventListener("mousemove",this.onMouseMove),this.canvas.addEventListener("mouseleave",this.onMouseLeave),this.tooltipContainer=document.createElement("div"),this.tooltipContainer.style.position="absolute",this.tooltipContainer.style.pointerEvents="none",this.container.appendChild(this.tooltipContainer)}destroy(){super.destroy(),this.canvas.removeEventListener("wheel",this.onWheel)}setRootFrame(i){this._rootFrame=i,this.frames=[],this._frameMaxT=void 0,this._collectFrames(i,0),this.fitContents(),this.setNeedsRedraw()}_collectFrames(i,n){this.frames.push({frame:i,depth:n,isApplicationCode:i.isApplicationCode,library:i.library,className:i.className,filePathShort:i.filePathShort});for(const s of i.children)s.identifier!==qe&&this._collectFrames(s,n+1)}get frameMaxT(){return this._frameMaxT===void 0&&(this._frameMaxT=this.frames.reduce((i,n)=>Math.max(i,n.frame.startTime+n.frame.time),0)),this._frameMaxT}get minZoom(){return(this.width-2*xe)/this.frameMaxT}get maxZoom(){return 6666666666666667e-8}fitContents(){this.startT=0,this.zoom=this.minZoom,this.isZoomedIn=!1}clampViewport(){this.zoom<this.minZoom?(this.zoom=this.minZoom,this.isZoomedIn=!1):this.isZoomedIn=!0,this.zoom>this.maxZoom&&(this.zoom=this.maxZoom),this.startT<0&&(this.startT=0);const i=this.frameMaxT-(this.width-2*xe)/this.zoom;this.startT>i&&(this.startT=i)}redraw(i,n){var o,u;const{width:s,height:l}=n;(s!==this.lastDrawWidth||l!==this.lastDrawHeight)&&(this.isZoomedIn?this.clampViewport():this.fitContents()),this.lastDrawWidth=s,this.lastDrawHeight=l,i.fillStyle=Un,i.fillRect(0,0,s,l),this.drawAxes(i);for(const d of this.frames)this.drawFrame(i,d);i.globalAlpha=1,i.fillStyle="red",i.font='23px "Source Sans Pro", sans-serif';const r=this.hitTest(((o=this.mouseLocation)==null?void 0:o.x)??0,((u=this.mouseLocation)==null?void 0:u.y)??0);this.updateTooltip(i,r)}drawAxes(i){const n=this.width/this.zoom;if(n==0)return;const s=Math.log10(n);let l=Math.ceil(s)+2;l<0&&(l=0);const r=Math.ceil(s)-3,o=u=>Ne(u,{from:[s,s-3],to:[.71,0]});for(let u=r;u<l;u++){let d=o(u);d=Math.max(0,Math.min(1,d)),d=Math.pow(d,2),this.drawAxis(i,Math.pow(10,u),d)}this.drawAxis(i,Math.pow(10,l),o(l),!0)}drawAxis(i,n,s,l=!1){i.fillStyle="white";const r=Math.floor(this.startT/n)*n,o=this.startT+this.width/this.zoom,u=Math.max(0,Math.ceil(-Math.log10(n)));for(let d=r;d<o;d+=n){const p=this.xForT(d);if(Math.round(d/n)%10===0&&!l)continue;i.globalAlpha=s,i.fillRect(p,at,1,this.height-at);const h=Ne(s,{from:[.12,.25],to:[0,.5],clamp:!0});if(h>.01){i.globalAlpha=h,i.font='13px "Source Sans Pro", sans-serif';let v=d.toFixed(u);v=="0"&&(v="0s"),i.fillText(v,p+3,at+10)}i.globalAlpha=1}}drawFrame(i,n){const{x:s,y:l,w:r,h:o}=this.frameDims(n);if(!(s+r<0||s>this.width)){if(i.fillStyle=this.colorForFrame(n),i.globalAlpha=n.isApplicationCode?1:.5,r<2){i.fillRect(s,l,r,o);return}if(i.save(),i.beginPath(),i.rect(s,l,r,o),i.fill(),i.clip(),r>2){i.font='13px "Source Sans Pro", sans-serif',i.fillStyle="white";let d=this.frameName(n),p=s;p<0&&(p=0);const m=Math.floor(r/3.3);d.length>m&&(d=d.substring(0,m)),i.fillText(d,p+2,l+13)}i.restore()}}frameDims(i){const n=i.depth*Gn+at+Xn,s=Kn;let l=this.xForT(i.frame.startTime),o=this.xForT(i.frame.startTime+i.frame.time)-l;return o<1&&(o=1),o>1&&(o-=Ne(o,{from:[1,3],to:[0,1],clamp:!0})),{x:l,y:n,w:o,h:s}}xForT(i){return(i-this.startT)*this.zoom+xe}tForX(i){return(i-xe)/this.zoom+this.startT}frameName(i){let n;return i.className?n=`${i.className}.${i.frame.function}`:i.frame.function=="<module>"?n=i.filePathShort??i.frame.filePath??"":n=i.frame.function,n}frameSelfTime(i){let n=i.frame.time;const s=i.frame.children.filter(l=>!l.isSynthetic);for(const l of s)n-=l.time;return n}hitTest(i,n){for(const s of this.frames){const{x:l,y:r,w:o,h:u}=this.frameDims(s);if(i>=l&&i<=l+o&&n>=r&&n<=r+u)return s}return null}onWheel(i){const n=i.ctrlKey||i.metaKey,s=n?.01:.0023,l=this.tForX(i.offsetX);this.zoom*=1-i.deltaY*s,this.clampViewport(),this.startT=l-(i.offsetX-xe)/this.zoom,n||(this.startT+=i.deltaX/this.zoom),this.clampViewport(),this.setNeedsRedraw(),i.preventDefault()}onMouseMove(i){this.mouseLocation={x:i.offsetX,y:i.offsetY},this.setNeedsRedraw()}onMouseLeave(i){this.mouseLocation=null,this.setNeedsRedraw()}_assignLibraryOrder(){const i={};for(const s of this.frames){const r=s.frame.library??"";i[r]=(i[r]||0)+1}const n=Object.keys(i);n.sort((s,l)=>i[l]-i[s]),this._libraryOrder=n}colorForLibraryIndex(i){if(this._colors[i]!==void 0)return this._colors[i];const n=Math.pow(2,Math.ceil(Math.log2(i+1))),l=(2*i-n+1)/n,r=Ji(Qn,l);return this._colors[i]=r,r}libraryIndexForFrame(i){this._libraryOrder||this._assignLibraryOrder();const n=i.library||"";let s=this._libraryOrder.indexOf(n);return s===-1&&(s=this._libraryOrder.length,this._libraryOrder.push(n)),s}colorForFrame(i){const n=this.libraryIndexForFrame(i);return this.colorForLibraryIndex(n)}updateTooltip(i,n){var s;if(n){const l={name:this.frameName(n),time:n.frame.time,selfTime:this.frameSelfTime(n),totalTime:((s=this._rootFrame)==null?void 0:s.time)??1e-12,location:`${n.filePathShort}:${n.frame.lineNo}`,locationColor:this.colorForFrame(n)};if(this.tooltipComponent?this.tooltipComponent.$set({f:l}):this.tooltipComponent=new zn({target:this.tooltipContainer,props:{f:l}}),this.mouseLocation){const r={x:this.mouseLocation.x+12,y:this.mouseLocation.y+12},o=Nn(i,l),u=this.width-10-o;r.x>u&&(r.x=u);const p=this.height-10-60;r.y>p&&(r.y=p),this.tooltipContainer.style.left=`${r.x}px`,this.tooltipContainer.style.top=`${r.y}px`}}n||this.tooltipComponent&&(this.tooltipComponent.$destroy(),this.tooltipComponent=null)}}function jn(t){let e;return{c(){e=f("div"),e.innerHTML="",a(e,"class","timeline svelte-1yk4ly5")},m(i,n){S(i,e,n),t[6](e)},p:M,i:M,o:M,d(i){i&&R(e),t[6](null)}}}function qn(t,e,i){let n,{session:s}=e;const l=Nt([je],([p])=>({processors:[p.removeImportlib?Ft:null,p.removeTracebackHide?Pt:null,p.removePyinstrument?li:null].filter(v=>v!==null),options:{}}));_e(t,l,p=>i(5,n=p));let r,o=null,u=null;function d(p){He[p?"unshift":"push"](()=>{o=p,i(0,o)})}return t.$$set=p=>{"session"in p&&i(2,s=p.session)},t.$$.update=()=>{t.$$.dirty&36&&i(3,r=ei(s.rootFrame.cloneDeep(),n.processors,n.options)),t.$$.dirty&1&&o&&i(4,u=new Zn(o)),t.$$.dirty&24&&r&&u&&u.setRootFrame(r)},[o,l,s,r,u,n,d]}class Yn extends he{constructor(e){super(),fe(this,e,qn,jn,le,{session:2})}}function xn(t){let e,i,n=t[1].viewMode+"",s;return{c(){e=f("div"),i=I("Unknown view mode: "),s=I(n),a(e,"class","error")},m(l,r){S(l,e,r),c(e,i),c(e,s)},p(l,r){r&2&&n!==(n=l[1].viewMode+"")&&Ae(s,n)},i:M,o:M,d(l){l&&R(e)}}}function Jn(t){let e,i;return e=new Yn({props:{session:t[0]}}),{c(){be(e.$$.fragment)},m(n,s){ue(e,n,s),i=!0},p(n,s){const l={};s&1&&(l.session=n[0]),e.$set(l)},i(n){i||(L(e.$$.fragment,n),i=!0)},o(n){B(e.$$.fragment,n),i=!1},d(n){de(e,n)}}}function es(t){let e,i;return e=new Hn({props:{session:t[0]}}),{c(){be(e.$$.fragment)},m(n,s){ue(e,n,s),i=!0},p(n,s){const l={};s&1&&(l.session=n[0]),e.$set(l)},i(n){i||(L(e.$$.fragment,n),i=!0)},o(n){B(e.$$.fragment,n),i=!1},d(n){de(e,n)}}}function ts(t){let e;return{c(){e=f("div"),e.innerHTML='<div class="spacer" style="height: 20px;"></div> <div class="error">No samples recorded.</div>',a(e,"class","margins")},m(i,n){S(i,e,n)},p:M,i:M,o:M,d(i){i&&R(e)}}}function is(t){let e,i,n,s,l,r,o,u;n=new hn({props:{session:t[0]}});const d=[ts,es,Jn,xn],p=[];function m(h,v){return h[0].rootFrame?h[1].viewMode==="call-stack"?1:h[1].viewMode==="timeline"?2:3:0}return r=m(t),o=p[r]=d[r](t),{c(){e=f("div"),i=f("div"),be(n.$$.fragment),s=w(),l=f("div"),o.c(),a(i,"class","header"),a(l,"class","body svelte-15bv5h8"),a(e,"class","app svelte-15bv5h8")},m(h,v){S(h,e,v),c(e,i),ue(n,i,null),c(e,s),c(e,l),p[r].m(l,null),u=!0},p(h,[v]){const _={};v&1&&(_.session=h[0]),n.$set(_);let b=r;r=m(h),r===b?p[r].p(h,v):(De(),B(p[b],1,1,()=>{p[b]=null}),$e(),o=p[r],o?o.p(h,v):(o=p[r]=d[r](h),o.c()),L(o,1),o.m(l,null))},i(h){u||(L(n.$$.fragment,h),L(o),u=!0)},o(h){B(n.$$.fragment,h),B(o),u=!1},d(h){h&&R(e),de(n),p[r].d()}}}function ns(t,e,i){let n;_e(t,Ze,m=>i(1,n=m));let{session:s}=e;const l=document.createElement("link");l.rel="shortcut icon",l.href=mn,document.head.appendChild(l);const r=document.createElement("link");r.rel="preload",r.as="style",r.onload=()=>{r.rel="stylesheet"},r.href="https://fonts.googleapis.com/css?family=Source+Code+Pro:400,600|Source+Sans+Pro:400,600&display=swap",document.head.appendChild(r);const o=s.rootFrame,u=o==null?void 0:o.time.toLocaleString(void 0,{maximumSignificantDigits:3});let d,p;return(p=/[^\s/]+(:\d+)?$/.exec(s.target_description))?d=p[0]:d=s.target_description,document.title=`${u}s - ${d} - pyinstrument`,t.$$set=m=>{"session"in m&&i(0,s=m.session)},[s,n]}class ss extends he{constructor(e){super(),fe(this,e,ns,is,le,{session:0})}}class rs{constructor(e){T(this,"startTime");T(this,"duration");T(this,"sampleCount");T(this,"target_description");T(this,"cpuTime");T(this,"rootFrame");T(this,"sysPath");T(this,"sysPrefixes");T(this,"_shortenPathCache",{});this.startTime=e.session.start_time,this.duration=e.session.duration,this.sampleCount=e.session.sample_count,this.target_description=e.session.target_description,this.cpuTime=e.session.cpu_time,this.sysPath=e.session.sys_path,this.sysPrefixes=e.session.sys_prefixes,this.rootFrame=new Ye(e.frame_tree,this)}shortenPath(e){if(this._shortenPathCache[e])return this._shortenPathCache[e];let i=e;if(Be(e).length>1)for(const s of this.sysPath){const l=os(e,s);Be(l).length<Be(i).length&&(i=l)}return this._shortenPathCache[e]=i,i}}function Be(t){return t.split(/[/\\]/)}function di(t){const e=Be(t);return e.length>0&&e[0].endsWith(":")?e[0]:null}function os(t,e){if(di(t)!=di(e))return t;const i=Be(t),n=Be(e);let s=0;for(;s<i.length&&s<n.length&&i[s]==n[s];)s++;return n.slice(s).map(r=>"..").concat(i.slice(s)).join("/")}return{render(t,e){const i=new rs(e);return new ss({target:t,props:{session:i}})}}}();
